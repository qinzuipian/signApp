<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../../css/common.css">
		<link rel="stylesheet" href="../css/medRemind.css">
		<link rel="stylesheet" href="../css/uploadfile.css">
		<link rel="stylesheet" href="../../css/mui.picker.min.css">
		<link rel="stylesheet" href="../../css/mui.poppicker.css">
	</head>

	<body>
		<header class="mui-bar mui-bar-nav header-blue">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title bind-title">添加用药提醒</h1>
		</header>
		<div id="app">
			
			<ul class="mui-table-view" style="margin-top: 0px;">
				<li class="mui-table-view-cell time" id="pickMedical">
					<p style="font-size: 16px;color: black;width: 45%;">用药人</p>
					<p class="babynum" v-text="peoplename"></p>
					<span class="mui-icon mui-icon-arrowright" style="line-height:2.5;width: 5%; font-size: 18px;"></span>
				</li>
				<li class="mui-table-view-cell time" id="appDocpeople">
					<p style="font-size: 16px;color: black;width: 32%;">药品名称</p>
					<input type="text" placeholder="输入药品名称" style="height: 36px; border: 0;">
					<!-- <p class="babynum" v-text="username"></p> -->
					<!-- <span class="mui-icon mui-icon-arrowright" style="line-height:2.5;width: 5%; font-size: 18px;"></span> -->
				</li>
				<li class="mui-table-view-cell time" id="dayNum">
					<p style="font-size: 16px;color: black;width: 45%;">每日次数</p>
					<p class="babynum" v-text="dayNum"></p>
					<span class="mui-icon mui-icon-arrowright" style="line-height:2.5;width: 5%; font-size: 18px;"></span>
				</li>
				<li class="mui-table-view-cell time" id="pickTimeBtn">
					<p style="font-size: 16px;color: black;width: 45%;">用药时间</p>
					<p class="babynum" v-text="remindTime"></p>
					<span class="mui-icon mui-icon-arrowright" style="line-height:2.5;width: 5%; font-size: 18px;"></span>
				</li>
				<li class="mui-table-view-cell time" id="appPoject">
					<p style="font-size: 16px;color: black;width: 45%;">每次用量</p>
					<input type="text" placeholder="输入每次用量" style="height: 36px; border: 0;">
					<!-- <span class="mui-icon mui-icon-arrowright" style="line-height:2.5;width: 5%; font-size: 18px;"></span> -->
				</li>
				<li class="mui-table-view-cell time" id="Company">
					<p style="font-size: 16px;color: black;width: 45%;">单位</p>
					<p class="babynum" v-text="medicalCompany"></p>
					<span class="mui-icon mui-icon-arrowright" style="line-height:2.5;width: 5%; font-size: 18px;"></span>
				</li>
				
				<li class="mui-table-view-cell time" id="appPoject">
					<p style="font-size: 16px;color: black;width: 45%;">是否提醒</p>
					<div class="mui-switch mui-switch-mini mui-active ">
						<div class="mui-switch-handle"></div>
					</div>
					<!-- <span class="mui-icon mui-icon-arrowright" style="line-height:2.5;width: 5%; font-size: 18px;"></span> -->
				</li>
				<li class="mui-table-view-cell time" id="remindTime">
					<p style="font-size: 16px;color: black;width: 45%;">提醒时间</p>
					<p class="babynum" v-text="medicalremind"></p>
					<span class="mui-icon mui-icon-arrowright" style="line-height:2.5;width: 5%; font-size: 18px;"></span>
				</li>
				<li class="mui-table-view-cell time" id="appPoject">
					<p style="font-size: 16px;color: black;width: 45%;">提醒方式</p>
					<p class="babynum">消息</p>
					<span class="mui-icon mui-icon-arrowright" style="line-height:2.5;width: 5%; font-size: 18px;"></span>
				</li>
			</ul>
			<button type="button" data-loading-icon-position="left"  class="mui-btn mui-btn-primary toalldoctor">保存</button>
		</div>
		<script src="../../js/common.js"></script>
		<script src="../../js/mui.min.js"></script>
		<script src="../../js/vue.min.js"></script>
		<script src="../../js/mui.picker.min.js"></script>
		<script src="../../js/mui.poppicker.js"></script>
		<script type="text/javascript">
			mui.init();
			var vm = new Vue({
				el:"#app",
				data:{
					peoplename:"",
					dayNum:"",
					remindTime:"",
					medicalCompany:"",
					medicalremind:""
				},
				methods:{}
			})
			mui('.mui-content .mui-switch').each(function() { //循环所有toggle
				//toggle.classList.contains('mui-active') 可识别该toggle的开关状态
				// this.classList.contains('mui-active');
				/**
				 * toggle 事件监听
				 */
				this.addEventListener('toggle', function(event) {
					//event.detail.isActive 可直接获取当前状态
					// event.detail.isActive;
				});
			});
			//选择用药人
			document.getElementById("pickMedical").addEventListener("tap",function() {
				var pickMedical = plus.webview.create("./../index1/appPeople.html",pickMedical);
				plus.webview.show(pickMedical,"slide-in-right",300);
			})
			
			window.addEventListener('username',function(event){
				vm.peoplename = event.detail;
				console.log(JSON.stringify(event.detail))
			});
			var userPicker = new mui.PopPicker();			
			//每日次数
			document.getElementById("dayNum").addEventListener("tap",function() {
				userPicker.setData([{
					value: '1',
					text: '1'
				},{
					value: '2',
					text: '2'
				},{
					value: '3',
					text: '3'
				},{
					value: '4',
					text: '4'
				}
				]);
				userPicker.show(function(items) {
					console.log(JSON.stringify(items))
					vm.dayNum = items[0].text;
				});
			})
			
			//选择药品单位
			document.getElementById("Company").addEventListener("tap",function() {
				userPicker.setData([{
					value: '1',
					text: '片'
				},{
					value: '2',
					text: '包'
				},{
					value: '3',
					text: '克'
				},{
					value: '4',
					text: '粒'
				},{
					value: '5',
					text: '颗'
				},{
					value: '6',
					text: '支'
				},{
					value: '7',
					text: '毫克'
				},{
					value: '8',
					text: '毫升'
				}
				]);
				userPicker.show(function(items) {
					console.log(JSON.stringify(items))
					vm.medicalCompany = items[0].text;
				});
			})
			//选择提醒时间
			document.getElementById("remindTime").addEventListener("tap",function(){
				userPicker.setData([{
					value: '5',
					text: '5'
				},{
					value: '15',
					text: '15'
				},{
					value: '30',
					text: '30'
				}]);
				userPicker.show(function(items) {
					console.log(JSON.stringify(items))
					vm.medicalremind = "用药前" + items[0].text + "分钟";
				});
			})
			//选择用药时间
			document.getElementById("pickTimeBtn").addEventListener('tap', function() {
				var dTime = new Date();
				// dTime.setHours(6, 0);
				plus.nativeUI.pickTime(function(e) {
					var d = e.date;
					console.log(JSON.stringify(d))		
					vm.remindTime = time(d.getHours()) + ":" + time(d.getMinutes());			
					console.log(JSON.stringify(vm.remindTime))
				}, function(e) {
					// vm.remindTime.innerText = "您没有选择时间"
				}, {
					title: "请选择时间",
					is24Hour: true,
					time: dTime
				});
			});
			//创建补0函数
			function time(s) {
				return s < 10 ? '0' + s: s;
			}
		</script>
	</body>

</html>
